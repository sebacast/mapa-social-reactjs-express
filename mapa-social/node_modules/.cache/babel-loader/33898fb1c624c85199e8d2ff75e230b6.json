{"ast":null,"code":"var _jsxFileName = \"/Users/sebastian/Desktop/mapa-social-sin-claves/mapa-social/src/componentes/Login.js\";\nimport React from 'react'; //import FacebookLogin from 'react-facebook-login';\n\nimport GoogleLogin from 'react-google-login';\nimport { apiPath } from './funciones';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.tokenApi = (response, tipo) => {\n      var login;\n      var url;\n\n      switch (tipo) {\n        case 1:\n          //google\n          //login = response.profileObj.imageUrl;\n          login = {\n            token: response.accessToken,\n            tipo: tipo,\n            perfil: {\n              googleId: response.profileObj.googleId,\n              email: response.profileObj.email,\n              nombre: response.profileObj.givenName,\n              apellido: response.profileObj.familyName\n            }\n          };\n          url = apiPath() + '/login';\n          break;\n\n        /*case 2: //facebook\n          login = { id: response.userID, token: response.accessToken, tipo: tipo };\n          url = apiPath() + '/login/facebook';\n          break;\n        case 3: //form\n          login = { email: response.email, clave: response.pass };\n          break;*/\n\n        default:\n          break;\n      }\n\n      fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Accept': 'appication/json'\n        },\n        body: JSON.stringify(login) //body: login\n\n      }).then(res => res.json()).then(data => localStorage.setItem('acc', JSON.stringify(data))).then(() => this.comprobarInicio());\n    };\n\n    this.state = {\n      mensaje: React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 10\n        },\n        __self: this\n      }),\n      email: '',\n      pass: ''\n    };\n    this.pass = this.pass.bind(this);\n  }\n\n  falloJson() {\n    localStorage.clear();\n    this.setState({\n      mensaje: React.createElement(\"div\", {\n        class: \"alert alert-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, \"No se pudo iniciar sesi\\xF3n\")\n    });\n  }\n\n  comprobarInicio() {\n    let mensaje = React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    });\n\n    if (JSON.parse(localStorage.getItem('acc')).valido) {\n      mensaje = React.createElement(\"div\", {\n        class: \"alert alert-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, \"Iniciando sesi\\xF3n\");\n      window.location.reload();\n    } else {\n      mensaje = React.createElement(\"div\", {\n        class: \"alert alert-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \"No se pudo iniciar sesi\\xF3n\");\n    }\n\n    this.setState({\n      mensaje: mensaje\n    });\n  }\n\n  pass(event) {\n    this.setState({\n      pass: event.target.value\n    });\n    event.preventDefault();\n  }\n\n  email(event) {\n    this.setState({\n      email: event.target.value\n    });\n    event.preventDefault();\n  }\n\n  validarEmail(valor) {\n    // eslint-disable-next-line no-useless-escape\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(valor).toLowerCase());\n  }\n\n  render() {\n    const responseGoogle = response => {\n      this.tokenApi(response, 1);\n    };\n    /*const responseFacebook = (response) => {\n      this.tokenApi(response, 2);\n    }*/\n\n\n    return React.createElement(\"section\", {\n      class: \"body-sign\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"center-sign\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"panel panel-sign\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, this.state.mensaje, React.createElement(\"div\", {\n      class: \"panel-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"tcabio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"mb-xs text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(GoogleLogin, {\n      clientId: \"410544772759-8kg0u2ad7jgcg7lmmtv4k6h211ntegek.apps.googleusercontent.com\",\n      buttonText: \"Inicia sesi\\xF3n con Google\",\n      onSuccess: responseGoogle //onFailure={responseGoogle}\n      ,\n      cookiePolicy: 'single_host_origin',\n      className: \"btn btn-primary btn-user btn-block\",\n      render: renderProps => React.createElement(\"button\", {\n        className: \"btn btn-info btn-user btn-block\",\n        onClick: renderProps.onClick,\n        disabled: renderProps.disabled,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"Ingresa con google\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/sebastian/Desktop/mapa-social-sin-claves/mapa-social/src/componentes/Login.js"],"names":["React","GoogleLogin","apiPath","Login","Component","constructor","props","tokenApi","response","tipo","login","url","token","accessToken","perfil","googleId","profileObj","email","nombre","givenName","apellido","familyName","fetch","method","headers","body","JSON","stringify","then","res","json","data","localStorage","setItem","comprobarInicio","state","mensaje","pass","bind","falloJson","clear","setState","parse","getItem","valido","window","location","reload","event","target","value","preventDefault","validarEmail","valor","re","test","String","toLowerCase","render","responseGoogle","renderProps","onClick","disabled"],"mappings":"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","sourcesContent":["import React from 'react';\n//import FacebookLogin from 'react-facebook-login';\nimport GoogleLogin from 'react-google-login';\nimport { apiPath } from './funciones';\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      mensaje: <div></div>,\n      email: '',\n      pass: ''\n    };\n    this.pass = this.pass.bind(this);\n  }\n  tokenApi = (response, tipo) => {\n    var login;\n    var url;\n    switch (tipo) {\n      case 1: //google\n        //login = response.profileObj.imageUrl;\n        login = { token: response.accessToken, tipo: tipo, perfil: { googleId: response.profileObj.googleId, email: response.profileObj.email, nombre: response.profileObj.givenName, apellido: response.profileObj.familyName } };\n        url = apiPath() + '/login';\n        break;\n      /*case 2: //facebook\n        login = { id: response.userID, token: response.accessToken, tipo: tipo };\n        url = apiPath() + '/login/facebook';\n        break;\n      case 3: //form\n        login = { email: response.email, clave: response.pass };\n        break;*/\n      default:\n        break;\n    }\n\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Accept': 'appication/json'\n      },\n      body: JSON.stringify(login),\n      //body: login\n    })\n      .then(res => res.json())\n      .then(data => localStorage.setItem('acc', JSON.stringify(data)))\n      .then(() => this.comprobarInicio());\n  }\n  falloJson() {\n    localStorage.clear();\n    this.setState({ mensaje: <div class=\"alert alert-danger\">No se pudo iniciar sesión</div> });\n  }\n  comprobarInicio() {\n    let mensaje = <div></div>;\n    if (JSON.parse(localStorage.getItem('acc')).valido) {\n      mensaje = <div class=\"alert alert-success\">Iniciando sesión</div>;\n      window.location.reload();\n    }\n    else {\n      mensaje = <div class=\"alert alert-danger\">No se pudo iniciar sesión</div>;\n    }\n    this.setState({ mensaje: mensaje });\n  }\n  pass(event) {\n    this.setState({ pass: event.target.value });\n    event.preventDefault();\n  }\n  email(event) {\n    this.setState({ email: event.target.value });\n    event.preventDefault();\n  }\n\n  validarEmail(valor) {\n    // eslint-disable-next-line no-useless-escape\n    var re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(valor).toLowerCase());\n  }\n  render() {\n    const responseGoogle = (response) => {\n      this.tokenApi(response, 1);\n    }\n    /*const responseFacebook = (response) => {\n      this.tokenApi(response, 2);\n    }*/\n\n    return (\n      <section class=\"body-sign\">\n        <div class=\"center-sign\">\n\n          <div class=\"panel panel-sign\">\n            {this.state.mensaje}\n            <div class=\"panel-body\" >\n              <div id=\"tcabio\">\n                <div class=\"mb-xs text-center\">\n\n                  <GoogleLogin\n                    clientId=\"410544772759-8kg0u2ad7jgcg7lmmtv4k6h211ntegek.apps.googleusercontent.com\"\n                    buttonText=\"Inicia sesión con Google\"\n                    onSuccess={responseGoogle}\n                    //onFailure={responseGoogle}\n                    cookiePolicy={'single_host_origin'}\n                    className={\"btn btn-primary btn-user btn-block\"}\n                    render={renderProps => (\n                      <button className={\"btn btn-info btn-user btn-block\"} onClick={renderProps.onClick} disabled={renderProps.disabled}>Ingresa con google</button>\n                    )}\n                  />\n                </div>\n              </div>\n              {/*<div class=\"mb-xs text-center\">\n                <FacebookLogin\n                  appId=\"603912473442243\"\n                  autoLoad={false}\n                  fields=\"name,email,picture\"\n                  scope=\"public_profile\"\n                  callback={responseFacebook}\n                  cssClass={\"btn btn-primary btn-user btn-block\"}\n                  textButton={\"Inicia sesión con Facebook\"}\n                />\n                    </div>*/}\n            </div>\n          </div>\n        </div>\n      </section>\n    );\n  }\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}