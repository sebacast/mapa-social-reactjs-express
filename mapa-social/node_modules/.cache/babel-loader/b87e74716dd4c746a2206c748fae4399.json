{"ast":null,"code":"var _jsxFileName = \"/Users/sebastian/Desktop/mapa-social-sin-claves/mapa-social/src/componentes/PerfilUsuarios.js\";\nimport React, { Component } from 'react';\nimport { getToken, apiPath } from './funciones';\nimport Contactos from './Contactos';\n\nclass PerfilUsuarios extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      perfil: [],\n      contactos: [],\n      rastreador: false,\n      adminUsuarios: false,\n      rutas: false,\n      mensajeCargaServicio: '',\n      mensajePass: '',\n      pass: '',\n      perfilSugerido: ''\n    };\n    this.getPerfil = this.getPerfil.bind(this);\n    this.setServicio = this.setServicio.bind(this);\n    this.cargarServicios = this.cargarServicios.bind(this);\n    this.enviarPass = this.enviarPass.bind(this);\n  }\n\n  componentDidMount() {\n    this.getPerfil();\n    this.getContactos();\n  }\n\n  getPerfil() {\n    let url = apiPath() + '/users/perfil';\n    fetch(url, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': getToken()\n      }\n    }).then(res => res.json()).then(data => {\n      this.setState({\n        perfil: data\n      });\n      this.checkBoxServicios();\n    });\n  }\n\n  getContactos() {\n    let url = apiPath() + '/contactos';\n    fetch(url, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': getToken()\n      }\n    }).then(response => response.json()).then(data => this.setContactos(data));\n  }\n\n  setContactos(data) {\n    this.setState({\n      contactos: data\n    });\n  }\n\n  setServicio(event) {\n    switch (event.target.value) {\n      case \"1\":\n        this.setState({\n          rastreador: !this.state.rastreador\n        });\n        break;\n\n      case \"2\":\n        this.setState({\n          adminUsuarios: !this.state.adminUsuarios\n        });\n        break;\n\n      case \"3\":\n        this.setState({\n          rutas: !this.state.rutas\n        });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  preCarga() {\n    let jsonMenus = [];\n\n    if (this.state.rastreador === true) {\n      jsonMenus.push({\n        id: '1',\n        icono: 'fa fa-map-marker',\n        des: 'Mapa'\n      });\n    } //agregar if correspondientes a los menues\n\n\n    return jsonMenus;\n  }\n\n  cargarServicios() {\n    let url = apiPath() + '/users/menu';\n    let jsonMenus = this.preCarga();\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Authorization': getToken()\n      },\n      body: JSON.stringify(jsonMenus)\n    }).then(data => this.cargarServiciosRespuesta(data)).then(setTimeout(() => {\n      window.location.reload();\n    }, 10000));\n  }\n\n  cargarServiciosRespuesta(data) {\n    if (data === \"undefined\" || data === null || data.aut === \"undefined\" || data.aut === false) {\n      this.setState({\n        mensajeCargaServicio: React.createElement(\"div\", {\n          class: \"alert alert-danger\",\n          role: \"alert\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, \"No se pudo realizar la carga de servicios\")\n      });\n    } else {\n      this.setState({\n        mensajeCargaServicio: React.createElement(\"div\", {\n          class: \"alert alert-success\",\n          role: \"alert\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, \"Actualizando el men\\xFA, un momento por favor... \", React.createElement(\"img\", {\n          src: \"/imagenes/cargando.gif\",\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }))\n      });\n    }\n  }\n\n  checkBoxServicios() {\n    try {\n      let menu = this.state.perfil.menu;\n\n      for (const key in menu) {\n        const element = menu[key];\n\n        switch (element.id) {\n          case '1':\n            this.setState({\n              rastreador: true\n            });\n            break;\n\n          case '2':\n            this.setState({\n              adminUsuarios: true\n            });\n            break;\n\n          case '3':\n            this.setState({\n              rutas: true\n            });\n            break;\n\n          default:\n            break;\n        }\n      }\n    } catch (error) {}\n  }\n\n  valProp(val) {\n    const st = {\n      opacity: 1\n    };\n\n    if (val === 'nombre1') {\n      var aux = val;\n      val = 'nombre';\n    }\n\n    if (this.state.perfil !== null && this.state.perfil.hasOwnProperty(val)) {\n      switch (val) {\n        /* eslint-disable no-unreachable */\n        case 'imagen':\n          return React.createElement(\"img\", {\n            src: this.state.perfil[val],\n            className: \"rounded img-responsive\",\n            alt: \"\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 140\n            },\n            __self: this\n          });\n          break;\n\n        case 'nombre':\n          if (typeof aux == 'undefined') {\n            return React.createElement(\"div\", {\n              className: \"thumb-info-title\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 144\n              },\n              __self: this\n            }, React.createElement(\"span\", {\n              className: \"thumb-info-inner\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 144\n              },\n              __self: this\n            }, this.state.perfil[val]));\n          } else {\n            return React.createElement(\"div\", {\n              className: \"form-group\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 147\n              },\n              __self: this\n            }, React.createElement(\"label\", {\n              className: \"col-md-3 control-label\",\n              for: \"profileFirstName\",\n              style: st,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 148\n              },\n              __self: this\n            }, val), React.createElement(\"div\", {\n              className: \"col-md-8\",\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 149\n              },\n              __self: this\n            }, React.createElement(\"label\", {\n              className: \"form-control\",\n              id: \"idform\",\n              style: st,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 150\n              },\n              __self: this\n            }, this.state.perfil[val])));\n          }\n\n          break;\n\n        default:\n          return React.createElement(\"div\", {\n            className: \"form-group\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157\n            },\n            __self: this\n          }, React.createElement(\"label\", {\n            className: \"col-md-3 control-label\",\n            for: \"profileFirstName\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          }, val), React.createElement(\"div\", {\n            className: \"col-md-8\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159\n            },\n            __self: this\n          }, React.createElement(\"label\", {\n            className: \"form-control\",\n            id: \"idform\",\n            style: st,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160\n            },\n            __self: this\n          }, this.state.perfil[val])));\n          break;\n\n        /* eslint-enable no-unreachable */\n      }\n    } else {\n      return '';\n    }\n  }\n\n  setPass(event) {\n    this.setState({\n      pass: event.target.value\n    });\n  }\n\n  enviarPass() {\n    let pass = this.state.pass;\n\n    if (pass && pass !== '') {\n      let url = apiPath() + '/users/android/password';\n      fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Authorization': getToken()\n        },\n        body: JSON.stringify({\n          pass: pass\n        })\n      }).then(res => res.json()).then(data => this.comprobarUpdPass(data));\n    }\n  }\n\n  comprobarUpdPass(data) {\n    if (data !== null && data.valido !== \"undefined\" && data.valido === true) {\n      this.setState({\n        mensajePass: React.createElement(\"div\", {\n          class: \"alert alert-success\",\n          role: \"alert\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, \"Password actualizado\")\n      });\n    } else {\n      this.setState({\n        mensajePass: React.createElement(\"div\", {\n          class: \"alert alert-danger\",\n          role: \"alert\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, \"No se pudo actualizar el password\")\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-4 col-lg-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      className: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"panel-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"thumb-info mb-md\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, this.valProp('imagen'), this.valProp('nombre')), React.createElement(\"div\", {\n      className: \"widget-toggle-expand mb-md\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"widget-content-expanded\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"simple-todo-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    })))))), React.createElement(Contactos, {\n      contactos: this.state.contactos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-8 col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"tabs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"nav nav-tabs tabs-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#edit\",\n      \"data-toggle\": \"tab\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, \"Informaci\\xF3n\")), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: \"#overview\",\n      \"data-toggle\": \"tab\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"Servicios\"))), React.createElement(\"div\", {\n      className: \"tab-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"edit\",\n      className: \"tab-pane active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"form-horizontal\",\n      method: \"get\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"mb-xlg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, \"Informaci\\xF3n personal\"), React.createElement(\"fieldset\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, this.valProp('nombre1'), this.valProp('email')))), React.createElement(\"div\", {\n      id: \"overview\",\n      className: \"tab-pane\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, this.state.mensajeCargaServicio, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, \"Servicios\"), React.createElement(\"input\", {\n      type: \"checkbox\",\n      value: \"1\",\n      checked: this.state.rastreador,\n      onClick: this.setServicio,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }), \" Mapa\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"btn btn-default\",\n      onClick: this.cargarServicios,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, \"Cargar servicios\"))))));\n  }\n\n}\n\nexport default PerfilUsuarios;","map":{"version":3,"sources":["/Users/sebastian/Desktop/mapa-social-sin-claves/mapa-social/src/componentes/PerfilUsuarios.js"],"names":["React","Component","getToken","apiPath","Contactos","PerfilUsuarios","constructor","props","state","perfil","contactos","rastreador","adminUsuarios","rutas","mensajeCargaServicio","mensajePass","pass","perfilSugerido","getPerfil","bind","setServicio","cargarServicios","enviarPass","componentDidMount","getContactos","url","fetch","method","headers","then","res","json","data","setState","checkBoxServicios","response","setContactos","event","target","value","preCarga","jsonMenus","push","id","icono","des","body","JSON","stringify","cargarServiciosRespuesta","setTimeout","window","location","reload","aut","menu","key","element","error","valProp","val","st","opacity","aux","hasOwnProperty","setPass","comprobarUpdPass","valido","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,EAAmBC,OAAnB,QAAkC,aAAlC;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AACA,MAAMC,cAAN,SAA6BJ,SAA7B,CAAuC;AACtCK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACZC,MAAAA,MAAM,EAAE,EADI;AAEZC,MAAAA,SAAS,EAAE,EAFC;AAGZC,MAAAA,UAAU,EAAE,KAHA;AAIZC,MAAAA,aAAa,EAAE,KAJH;AAKZC,MAAAA,KAAK,EAAE,KALK;AAMZC,MAAAA,oBAAoB,EAAE,EANV;AAOZC,MAAAA,WAAW,EAAE,EAPD;AAQZC,MAAAA,IAAI,EAAE,EARM;AASZC,MAAAA,cAAc,EAAE;AATJ,KAAb;AAWA,SAAKC,SAAL,GAAiB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKE,eAAL,GAAuB,KAAKA,eAAL,CAAqBF,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKG,UAAL,GAAkB,KAAKA,UAAL,CAAgBH,IAAhB,CAAqB,IAArB,CAAlB;AACA;;AACDI,EAAAA,iBAAiB,GAAG;AACnB,SAAKL,SAAL;AACA,SAAKM,YAAL;AACA;;AACDN,EAAAA,SAAS,GAAG;AACX,QAAIO,GAAG,GAAGtB,OAAO,KAAK,eAAtB;AACAuB,IAAAA,KAAK,CAACD,GAAD,EAAM;AACVE,MAAAA,MAAM,EAAE,KADE;AAEVC,MAAAA,OAAO,EAAE;AACR,wBAAgB,kBADR;AAER,yBAAiB1B,QAAQ;AAFjB;AAFC,KAAN,CAAL,CAOE2B,IAPF,CAOOC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EAPd,EAQEF,IARF,CAQOG,IAAI,IAAI;AACb,WAAKC,QAAL,CAAc;AAAExB,QAAAA,MAAM,EAAEuB;AAAV,OAAd;AACA,WAAKE,iBAAL;AACA,KAXF;AAYA;;AACDV,EAAAA,YAAY,GAAG;AACd,QAAIC,GAAG,GAAGtB,OAAO,KAAK,YAAtB;AACAuB,IAAAA,KAAK,CAACD,GAAD,EAAM;AACVE,MAAAA,MAAM,EAAE,KADE;AAEVC,MAAAA,OAAO,EAAE;AACR,wBAAgB,kBADR;AAER,yBAAiB1B,QAAQ;AAFjB;AAFC,KAAN,CAAL,CAOE2B,IAPF,CAOOM,QAAQ,IAAIA,QAAQ,CAACJ,IAAT,EAPnB,EAQEF,IARF,CAQOG,IAAI,IAAI,KAAKI,YAAL,CAAkBJ,IAAlB,CARf;AAUA;;AAEDI,EAAAA,YAAY,CAACJ,IAAD,EAAO;AAClB,SAAKC,QAAL,CAAc;AAAEvB,MAAAA,SAAS,EAAEsB;AAAb,KAAd;AACA;;AACDZ,EAAAA,WAAW,CAACiB,KAAD,EAAQ;AAClB,YAAQA,KAAK,CAACC,MAAN,CAAaC,KAArB;AACC,WAAK,GAAL;AACC,aAAKN,QAAL,CAAc;AAAEtB,UAAAA,UAAU,EAAE,CAAC,KAAKH,KAAL,CAAWG;AAA1B,SAAd;AACA;;AACD,WAAK,GAAL;AACC,aAAKsB,QAAL,CAAc;AAAErB,UAAAA,aAAa,EAAE,CAAC,KAAKJ,KAAL,CAAWI;AAA7B,SAAd;AACA;;AACD,WAAK,GAAL;AACC,aAAKqB,QAAL,CAAc;AAAEpB,UAAAA,KAAK,EAAE,CAAC,KAAKL,KAAL,CAAWK;AAArB,SAAd;AACA;;AACD;AACC;AAXF;AAaA;;AACD2B,EAAAA,QAAQ,GAAG;AACV,QAAIC,SAAS,GAAG,EAAhB;;AACA,QAAI,KAAKjC,KAAL,CAAWG,UAAX,KAA0B,IAA9B,EAAoC;AACnC8B,MAAAA,SAAS,CAACC,IAAV,CAAe;AAAEC,QAAAA,EAAE,EAAE,GAAN;AAAWC,QAAAA,KAAK,EAAE,kBAAlB;AAAsCC,QAAAA,GAAG,EAAE;AAA3C,OAAf;AACA,KAJS,CAKV;;;AACA,WAAOJ,SAAP;AACA;;AACDpB,EAAAA,eAAe,GAAG;AACjB,QAAII,GAAG,GAAGtB,OAAO,KAAK,aAAtB;AACA,QAAIsC,SAAS,GAAG,KAAKD,QAAL,EAAhB;AACAd,IAAAA,KAAK,CAACD,GAAD,EAAM;AACVE,MAAAA,MAAM,EAAE,MADE;AAEVC,MAAAA,OAAO,EAAE;AACR,wBAAgB,mCADR;AAER,yBAAiB1B,QAAQ;AAFjB,OAFC;AAMV4C,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeP,SAAf;AANI,KAAN,CAAL,CASEZ,IATF,CASOG,IAAI,IAAI,KAAKiB,wBAAL,CAA8BjB,IAA9B,CATf,EAUEH,IAVF,CAUOqB,UAAU,CAAC,MAAM;AAAEC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AAA0B,KAAnC,EAAqC,KAArC,CAVjB;AAWA;;AACDJ,EAAAA,wBAAwB,CAACjB,IAAD,EAAO;AAC9B,QAAIA,IAAI,KAAK,WAAT,IAAwBA,IAAI,KAAK,IAAjC,IAAyCA,IAAI,CAACsB,GAAL,KAAa,WAAtD,IAAqEtB,IAAI,CAACsB,GAAL,KAAa,KAAtF,EAA6F;AAC5F,WAAKrB,QAAL,CAAc;AAAEnB,QAAAA,oBAAoB,EAAE;AAAK,UAAA,KAAK,EAAC,oBAAX;AAAgC,UAAA,IAAI,EAAC,OAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAxB,OAAd;AACA,KAFD,MAGK;AACJ,WAAKmB,QAAL,CAAc;AAAEnB,QAAAA,oBAAoB,EAAE;AAAK,UAAA,KAAK,EAAC,qBAAX;AAAiC,UAAA,IAAI,EAAC,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gEAA4F;AAAK,UAAA,GAAG,EAAC,wBAAT;AAAkC,UAAA,GAAG,EAAC,EAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAA5F;AAAxB,OAAd;AACA;AACD;;AACDoB,EAAAA,iBAAiB,GAAG;AACnB,QAAI;AACH,UAAIqB,IAAI,GAAG,KAAK/C,KAAL,CAAWC,MAAX,CAAkB8C,IAA7B;;AACA,WAAK,MAAMC,GAAX,IAAkBD,IAAlB,EAAwB;AACvB,cAAME,OAAO,GAAGF,IAAI,CAACC,GAAD,CAApB;;AACA,gBAAQC,OAAO,CAACd,EAAhB;AACC,eAAK,GAAL;AACC,iBAAKV,QAAL,CAAc;AAAEtB,cAAAA,UAAU,EAAE;AAAd,aAAd;AACA;;AACD,eAAK,GAAL;AACC,iBAAKsB,QAAL,CAAc;AAAErB,cAAAA,aAAa,EAAE;AAAjB,aAAd;AACA;;AACD,eAAK,GAAL;AACC,iBAAKqB,QAAL,CAAc;AAAEpB,cAAAA,KAAK,EAAE;AAAT,aAAd;AACA;;AACD;AACC;AAXF;AAaA;AACD,KAlBD,CAmBA,OAAO6C,KAAP,EAAc,CACb;AACD;;AACDC,EAAAA,OAAO,CAACC,GAAD,EAAM;AACZ,UAAMC,EAAE,GAAG;AACVC,MAAAA,OAAO,EAAE;AADC,KAAX;;AAGA,QAAIF,GAAG,KAAK,SAAZ,EAAuB;AACtB,UAAIG,GAAG,GAAGH,GAAV;AACAA,MAAAA,GAAG,GAAG,QAAN;AACA;;AACD,QAAI,KAAKpD,KAAL,CAAWC,MAAX,KAAsB,IAAtB,IAA8B,KAAKD,KAAL,CAAWC,MAAX,CAAkBuD,cAAlB,CAAiCJ,GAAjC,CAAlC,EAAyE;AACxE,cAAQA,GAAR;AACC;AACA,aAAK,QAAL;AACC,iBAAO;AAAK,YAAA,GAAG,EAAE,KAAKpD,KAAL,CAAWC,MAAX,CAAkBmD,GAAlB,CAAV;AAAkC,YAAA,SAAS,EAAC,wBAA5C;AAAqE,YAAA,GAAG,EAAC,EAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACA;;AACD,aAAK,QAAL;AACC,cAAI,OAAQG,GAAR,IAAgB,WAApB,EAAiC;AAChC,mBAAO;AAAK,cAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAkC;AAAM,cAAA,SAAS,EAAC,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAoC,KAAKvD,KAAL,CAAWC,MAAX,CAAkBmD,GAAlB,CAApC,CAAlC,CAAP;AACA,WAFD,MAGK;AACJ,mBAAO;AAAK,cAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACN;AAAO,cAAA,SAAS,EAAC,wBAAjB;AAA0C,cAAA,GAAG,EAAC,kBAA9C;AAAiE,cAAA,KAAK,EAAEC,EAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAA6ED,GAA7E,CADM,EAEN;AAAK,cAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACC;AAAO,cAAA,SAAS,EAAC,cAAjB;AAAgC,cAAA,EAAE,EAAC,QAAnC;AAA4C,cAAA,KAAK,EAAEC,EAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAwD,KAAKrD,KAAL,CAAWC,MAAX,CAAkBmD,GAAlB,CAAxD,CADD,CAFM,CAAP;AAOA;;AACD;;AACD;AACC,iBAAO;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACN;AAAO,YAAA,SAAS,EAAC,wBAAjB;AAA0C,YAAA,GAAG,EAAC,kBAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAkEA,GAAlE,CADM,EAEN;AAAK,YAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACC;AAAO,YAAA,SAAS,EAAC,cAAjB;AAAgC,YAAA,EAAE,EAAC,QAAnC;AAA4C,YAAA,KAAK,EAAEC,EAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAwD,KAAKrD,KAAL,CAAWC,MAAX,CAAkBmD,GAAlB,CAAxD,CADD,CAFM,CAAP;AAMA;;AACD;AA3BD;AA6BA,KA9BD,MA+BK;AACJ,aAAO,EAAP;AACA;AACD;;AACDK,EAAAA,OAAO,CAAC5B,KAAD,EAAQ;AACd,SAAKJ,QAAL,CAAc;AAAEjB,MAAAA,IAAI,EAAEqB,KAAK,CAACC,MAAN,CAAaC;AAArB,KAAd;AACA;;AACDjB,EAAAA,UAAU,GAAG;AACZ,QAAIN,IAAI,GAAG,KAAKR,KAAL,CAAWQ,IAAtB;;AACA,QAAIA,IAAI,IAAIA,IAAI,KAAK,EAArB,EAAyB;AACxB,UAAIS,GAAG,GAAGtB,OAAO,KAAK,yBAAtB;AACAuB,MAAAA,KAAK,CAACD,GAAD,EAAM;AACVE,QAAAA,MAAM,EAAE,MADE;AAEVC,QAAAA,OAAO,EAAE;AACR,0BAAgB,mCADR;AAER,2BAAiB1B,QAAQ;AAFjB,SAFC;AAMV4C,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEhC,UAAAA,IAAI,EAAEA;AAAR,SAAf;AANI,OAAN,CAAL,CAQEa,IARF,CAQOC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARd,EASEF,IATF,CASOG,IAAI,IAAI,KAAKkC,gBAAL,CAAsBlC,IAAtB,CATf;AAUA;AACD;;AACDkC,EAAAA,gBAAgB,CAAClC,IAAD,EAAO;AACtB,QAAIA,IAAI,KAAK,IAAT,IAAiBA,IAAI,CAACmC,MAAL,KAAgB,WAAjC,IAAgDnC,IAAI,CAACmC,MAAL,KAAgB,IAApE,EAA0E;AACzE,WAAKlC,QAAL,CAAc;AAAElB,QAAAA,WAAW,EAAE;AAAK,UAAA,KAAK,EAAC,qBAAX;AAAiC,UAAA,IAAI,EAAC,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAf,OAAd;AACA,KAFD,MAGK;AACJ,WAAKkB,QAAL,CAAc;AAAElB,QAAAA,WAAW,EAAE;AAAK,UAAA,KAAK,EAAC,oBAAX;AAAgC,UAAA,IAAI,EAAC,OAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAf,OAAd;AACA;AACD;;AACDqD,EAAAA,MAAM,GAAG;AACR,WACC;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAS,MAAA,SAAS,EAAC,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAKT,OAAL,CAAa,QAAb,CADF,EAEE,KAAKA,OAAL,CAAa,QAAb,CAFF,CADD,EAKC;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAI,MAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CADD,CADD,CALD,CADD,CADD,EAgBC,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAE,KAAKnD,KAAL,CAAWE,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhBD,CADD,EAmBC;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAI,MAAA,SAAS,EAAC,2BAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAI,MAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAG,MAAA,IAAI,EAAC,OAAR;AAAgB,qBAAY,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADD,CADD,EAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAI;AAAG,MAAA,IAAI,EAAC,WAAR;AAAoB,qBAAY,KAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAJ,CAJD,CADD,EAQC;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAK,MAAA,EAAE,EAAC,MAAR;AAAe,MAAA,SAAS,EAAC,iBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAM,MAAA,SAAS,EAAC,iBAAhB;AAAkC,MAAA,MAAM,EAAC,KAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAI,MAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADD,EAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAKiD,OAAL,CAAa,SAAb,CADF,EAIE,KAAKA,OAAL,CAAa,OAAb,CAJF,CAFD,CADD,CADD,EAaC;AAAK,MAAA,EAAE,EAAC,UAAR;AAAmB,MAAA,SAAS,EAAC,UAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAKnD,KAAL,CAAWM,oBADb,EAEC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFD,EAGC;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,KAAK,EAAC,GAA7B;AAAiC,MAAA,OAAO,EAAE,KAAKN,KAAL,CAAWG,UAArD;AAAiE,MAAA,OAAO,EAAE,KAAKS,WAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHD,WAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJD,EAIO;AAAQ,MAAA,SAAS,EAAC,iBAAlB;AAAoC,MAAA,OAAO,EAAE,KAAKC,eAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAJP,CAbD,CARD,CADD,CAnBD,CADD;AAqDA;;AAxPqC;;AA0PvC,eAAehB,cAAf","sourcesContent":["import React, { Component } from 'react';\nimport { getToken, apiPath } from './funciones';\nimport Contactos from './Contactos';\nclass PerfilUsuarios extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tperfil: [],\n\t\t\tcontactos: [],\n\t\t\trastreador: false,\n\t\t\tadminUsuarios: false,\n\t\t\trutas: false,\n\t\t\tmensajeCargaServicio: '',\n\t\t\tmensajePass: '',\n\t\t\tpass: '',\n\t\t\tperfilSugerido: ''\n\t\t};\n\t\tthis.getPerfil = this.getPerfil.bind(this);\n\t\tthis.setServicio = this.setServicio.bind(this);\n\t\tthis.cargarServicios = this.cargarServicios.bind(this);\n\t\tthis.enviarPass = this.enviarPass.bind(this);\n\t}\n\tcomponentDidMount() {\n\t\tthis.getPerfil();\n\t\tthis.getContactos();\n\t}\n\tgetPerfil() {\n\t\tlet url = apiPath() + '/users/perfil';\n\t\tfetch(url, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Authorization': getToken(),\n\t\t\t}\n\t\t})\n\t\t\t.then(res => res.json())\n\t\t\t.then(data => {\n\t\t\t\tthis.setState({ perfil: data });\n\t\t\t\tthis.checkBoxServicios();\n\t\t\t});\n\t}\n\tgetContactos() {\n\t\tlet url = apiPath() + '/contactos';\n\t\tfetch(url, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t'Authorization': getToken()\n\t\t\t},\n\t\t})\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => this.setContactos(data));\n\n\t}\n\n\tsetContactos(data) {\n\t\tthis.setState({ contactos: data });\n\t}\n\tsetServicio(event) {\n\t\tswitch (event.target.value) {\n\t\t\tcase \"1\":\n\t\t\t\tthis.setState({ rastreador: !this.state.rastreador })\n\t\t\t\tbreak;\n\t\t\tcase \"2\":\n\t\t\t\tthis.setState({ adminUsuarios: !this.state.adminUsuarios })\n\t\t\t\tbreak;\n\t\t\tcase \"3\":\n\t\t\t\tthis.setState({ rutas: !this.state.rutas })\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\tpreCarga() {\n\t\tlet jsonMenus = [];\n\t\tif (this.state.rastreador === true) {\n\t\t\tjsonMenus.push({ id: '1', icono: 'fa fa-map-marker', des: 'Mapa' })\n\t\t}\n\t\t//agregar if correspondientes a los menues\n\t\treturn jsonMenus\n\t}\n\tcargarServicios() {\n\t\tlet url = apiPath() + '/users/menu';\n\t\tlet jsonMenus = this.preCarga();\n\t\tfetch(url, {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t'Authorization': getToken(),\n\t\t\t},\n\t\t\tbody: JSON.stringify(jsonMenus)\n\n\t\t})\n\t\t\t.then(data => this.cargarServiciosRespuesta(data))\n\t\t\t.then(setTimeout(() => { window.location.reload() }, 10000))\n\t}\n\tcargarServiciosRespuesta(data) {\n\t\tif (data === \"undefined\" || data === null || data.aut === \"undefined\" || data.aut === false) {\n\t\t\tthis.setState({ mensajeCargaServicio: <div class=\"alert alert-danger\" role=\"alert\">No se pudo realizar la carga de servicios</div> })\n\t\t}\n\t\telse {\n\t\t\tthis.setState({ mensajeCargaServicio: <div class=\"alert alert-success\" role=\"alert\">Actualizando el menú, un momento por favor... <img src=\"/imagenes/cargando.gif\" alt=\"\" /></div> })\n\t\t}\n\t}\n\tcheckBoxServicios() {\n\t\ttry {\n\t\t\tlet menu = this.state.perfil.menu\n\t\t\tfor (const key in menu) {\n\t\t\t\tconst element = menu[key];\n\t\t\t\tswitch (element.id) {\n\t\t\t\t\tcase '1':\n\t\t\t\t\t\tthis.setState({ rastreador: true })\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '2':\n\t\t\t\t\t\tthis.setState({ adminUsuarios: true })\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase '3':\n\t\t\t\t\t\tthis.setState({ rutas: true })\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (error) {\n\t\t}\n\t}\n\tvalProp(val) {\n\t\tconst st = {\n\t\t\topacity: 1,\n\t\t}\n\t\tif (val === 'nombre1') {\n\t\t\tvar aux = val;\n\t\t\tval = 'nombre';\n\t\t}\n\t\tif (this.state.perfil !== null && this.state.perfil.hasOwnProperty(val)) {\n\t\t\tswitch (val) {\n\t\t\t\t/* eslint-disable no-unreachable */\n\t\t\t\tcase 'imagen':\n\t\t\t\t\treturn <img src={this.state.perfil[val]} className=\"rounded img-responsive\" alt=\"\" />\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'nombre':\n\t\t\t\t\tif (typeof (aux) == 'undefined') {\n\t\t\t\t\t\treturn <div className=\"thumb-info-title\"><span className=\"thumb-info-inner\">{this.state.perfil[val]}</span></div>\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn <div className=\"form-group\">\n\t\t\t\t\t\t\t<label className=\"col-md-3 control-label\" for=\"profileFirstName\" style={st}>{val}</label>\n\t\t\t\t\t\t\t<div className=\"col-md-8\">\n\t\t\t\t\t\t\t\t<label className=\"form-control\" id=\"idform\" style={st}>{this.state.perfil[val]}</label>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn <div className=\"form-group\">\n\t\t\t\t\t\t<label className=\"col-md-3 control-label\" for=\"profileFirstName\">{val}</label>\n\t\t\t\t\t\t<div className=\"col-md-8\">\n\t\t\t\t\t\t\t<label className=\"form-control\" id=\"idform\" style={st}>{this.state.perfil[val]}</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\tbreak;\n\t\t\t\t/* eslint-enable no-unreachable */\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn '';\n\t\t}\n\t}\n\tsetPass(event) {\n\t\tthis.setState({ pass: event.target.value });\n\t}\n\tenviarPass() {\n\t\tlet pass = this.state.pass;\n\t\tif (pass && pass !== '') {\n\t\t\tlet url = apiPath() + '/users/android/password';\n\t\t\tfetch(url, {\n\t\t\t\tmethod: 'POST',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t'Authorization': getToken(),\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({ pass: pass }),\n\t\t\t})\n\t\t\t\t.then(res => res.json())\n\t\t\t\t.then(data => this.comprobarUpdPass(data));\n\t\t}\n\t}\n\tcomprobarUpdPass(data) {\n\t\tif (data !== null && data.valido !== \"undefined\" && data.valido === true) {\n\t\t\tthis.setState({ mensajePass: <div class=\"alert alert-success\" role=\"alert\">Password actualizado</div> })\n\t\t}\n\t\telse {\n\t\t\tthis.setState({ mensajePass: <div class=\"alert alert-danger\" role=\"alert\">No se pudo actualizar el password</div> })\n\t\t}\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"row\">\n\t\t\t\t<div className=\"col-md-4 col-lg-3\">\n\t\t\t\t\t<section className=\"panel\">\n\t\t\t\t\t\t<div className=\"panel-body\">\n\t\t\t\t\t\t\t<div className=\"thumb-info mb-md\">\n\t\t\t\t\t\t\t\t{this.valProp('imagen')}\n\t\t\t\t\t\t\t\t{this.valProp('nombre')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"widget-toggle-expand mb-md\">\n\t\t\t\t\t\t\t\t<div className=\"widget-content-expanded\">\n\t\t\t\t\t\t\t\t\t<ul className=\"simple-todo-list\">\n\t\t\t\t\t\t\t\t\t\t<li></li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</section>\n\t\t\t\t\t<Contactos contactos={this.state.contactos} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-md-8 col-lg-6\">\n\t\t\t\t\t<div className=\"tabs\">\n\t\t\t\t\t\t<ul className=\"nav nav-tabs tabs-primary\">\n\t\t\t\t\t\t\t<li className=\"active\">\n\t\t\t\t\t\t\t\t<a href=\"#edit\" data-toggle=\"tab\">Información</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li><a href=\"#overview\" data-toggle=\"tab\">Servicios</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div className=\"tab-content\">\n\t\t\t\t\t\t\t<div id=\"edit\" className=\"tab-pane active\">\n\t\t\t\t\t\t\t\t<form className=\"form-horizontal\" method=\"get\">\n\t\t\t\t\t\t\t\t\t<h4 className=\"mb-xlg\">Información personal</h4>\n\t\t\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t\t\t{this.valProp('nombre1')}\n\t\t\t\t\t\t\t\t\t\t{/*this.valProp('apellido')*/}\n\n\t\t\t\t\t\t\t\t\t\t{this.valProp('email')}\n\t\t\t\t\t\t\t\t\t</fieldset>\n\n\t\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div id=\"overview\" className=\"tab-pane\">\n\t\t\t\t\t\t\t\t{this.state.mensajeCargaServicio}\n\t\t\t\t\t\t\t\t<h3>Servicios</h3>\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" value=\"1\" checked={this.state.rastreador} onClick={this.setServicio} /> Mapa\n\t\t\t\t\t\t\t\t<br /><button className=\"btn btn-default\" onClick={this.cargarServicios} >Cargar servicios</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\nexport default PerfilUsuarios;\n\n\n"]},"metadata":{},"sourceType":"module"}